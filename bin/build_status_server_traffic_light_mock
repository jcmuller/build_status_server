#!/usr/bin/env ruby

require "rubygems"
require "sinatra"

enable :sessions

#set :logging, true

before do
  STDERR.puts "[#{Time.now}] [test_server] #{request.path}"
end

get "/" do
  "<html>/</html>"
end

get %r(/(red|green|yellow|alive|current|off)) do |path|
  session[:active] = path
  "<html>#{path}</html>"
end

get "/active" do
  "<html>#{session[:active]}</html>"
end
